# Interview-abstract

## 什么是OC

OC语言在c语言的基础上，增加了一层最小的面向对象语法，完全兼容C语言，在OC代码中，可以混用c， 甚至是c++代码。可以使用OC开发mac osx平台和iOS平台的应用程序。拓展名：c语言.c OC语言.m 兼容C++.mm。

为了与c语言的关键字区分开来,基本上所有的关键字都是以@开头。基本类型：5种，增加了布尔类型， BOOL类型与其他类型的用法一致，BOOL类型的本质是char类型的，定义如下：

```objc
 Typedef signed char BOOL
```

宏定义:

```objc
#define YES  (BOOL)1
#define NO   (BOOL)0
```

布尔类型的输出一般当做整数来用。 程序编译连接过程为：源文件（.m）---(编译)---->目标文件（.0）-----（链接）---->可执行文件（.out）。

每个对象内部都默认有一个isa指针指向这个对象所使用的类。isa是对象中的隐藏指针，指向创建这个对象的类。 OC做为一门面向对象语言，具有面向对象的语言特性，如封装、继承、多态。也具有静态语言的特性(如C++)， 又有动态语言的效率(动态绑定、动态加载等)。

Apple公司领导着Objective-C语言的发展与维护，包括Objective-C运行时， Cocoa/Cocoa-Touch框架以及Objective-C语言的编译器。

## 什么是面向对象

OC语言是面向对象的，c语言是面向过程的，面向对象和面向过程只是解决问题的两种思考方式， 面向过程关注的是解决问题涉及的步骤，面向对象关注的是设计能够实现解决问题所需功能的类。

面向对象的编程方法具有四个基本特征：抽象，封装，继承和多态。

抽象是忽略一个主题中与当前目标无关的那些方面，以便更充分地注意与当前目标有关的方面。 抽象包括两个方面，一是过程抽象，二是数据抽象。过程抽象是指任何一个明确定义功能的操作都可被使用者看作单个的实体看待， 尽管这个操作实际上可能由一系列更低级的操作来完成。数据抽象定义了数据类型和施加于该类型对象上的操作， 并限定了对象的值只能通过使用这些操作修改和观察。

继承是一种联结类的层次模型，并且允许和鼓励类的重用，它提供了一种明确表述共性的方法。 新类继承了原始类的特性，新类称为原始类的派生类（子类），而原始类称为新类的基类（父类）。 派生类可以从它的基类那里继承方法和实例变量，并且类可以修改或增加新的方法使之更适合特殊的需要。 继承性很好的解决了软件的可重用性问题。

封装是把过程和数据包围起来，对数据的访问只能通过已定义的界面。面向对象计算始于这个基本概念， 即现实世界可以被描绘成一系列完全自治、封装的对象，这些对象通过一个受保护的接口访问其他对象。 一旦定义了一个对象的特性，则有必要决定这些特性的可见性，封装保证了模块具有较好的独立性， 使得程序维护修改较为容易。对应用程序的修改仅限于类的内部，因而可以将应用程序修改带来的影响减少到最低限度。

多态性是指允许不同类的对象对同一消息作出响应。多态性包括参数化多态性和包含多态性。 多态性语言具有灵活、抽象、行为共享、代码共享的优势，很好的解决了应用程序函数同名问题。**多态是依赖于接口的**。

但是，在C++使用OOP的编程方式在一些场合未能提供最高性能。现在内存存取成为计算机性能的重要瓶颈， 这个问题在C++设计OOP编程范式的实现方式之初并未能考虑周全。现时的OOP编程有可能不缓存友好（cache friendly）， 导致有时候并不能发挥硬件最佳性能。大概就是过度封装，多态增加cache miss的可能性，数据存取时导致载入缓存的浪费等。

## OC和传统的面向对象语言有什么区别和优势

OC中方法的实现只能写在@implementation··@end中，对象方法的声明只能写在@interface···@end中间； 对象方法都以-号开头，类方法都以+号开头；对象方法只能由对象来调用，类方法只能由类来调用， 不能当做函数一样调用。函数属于整个文件，可以写在文件中的任何位置，包括@implementation··@end中， 但写在@interface···@end会无法识别，函数的声明可以在main函数内部也可以在main函数外部。 对象方法归类\对象所有；函数调用不依赖于对象；函数内部不能直接通过成员变量名访问对象的成员变量。

Objective-C的运行时是动态的，它能让你在运行时为类添加方法或者去除方法以及使用反射。 OC的动态特性表现为了三个方面：动态类型、动态绑定、动态加载。之所以叫做动态， 是因为必须到运行时(run time)才会做一些事情。

动态类型，说简单点就是id类型。动态类型是跟静态类型相对的。像内置的明确的基本类型都属于静态类型(int、NSString等)。 静态类型在编译的时候就能被识别出来。所以，若程序发生了类型不对应，编译器就会发出警告。 而动态类型就编译器编译的时候是不能被识别的，要等到运行时(run time)，即程序运行的时候才会根据语境来识别。 所以这里面就有两个概念要分清：编译时跟运行时。

动态绑定(dynamic binding)需要用到@selector/SEL。先来看看"函数"，对于其他一些静态语言， 比如c++,一般在编译的时候就已经将要调用的函数的函数签名都告诉编译器了。静态的，不能改变。而在OC中， 其实是没有函数的概念的，我们叫"消息机制"，所谓的函数调用就是给对象发送一条消息。这时， 动态绑定的特性就来了。OC可以先跳过编译，到运行的时候才动态地添加函数调用，在运行时才决定要调用什么方法， 需要传什么参数进去。这就是动态绑定，要实现他就必须用SEL变量绑定一个方法。 最终形成的这个SEL变量就代表一个方法的引用。这里要注意一点：**SEL并不是C里面的函数指针**，虽然很像， 但真心不是函数指针。SEL变量只是一个整数，他是该方法的ID。以前的函数调用，是根据函数名， 也就是字符串去查找函数体。但现在，我们是根据一个ID整数来查找方法，整数的查找字自然要比字符串的查找快得多！ 所以，动态绑定的特定不仅方便，而且效率更高。

动态加载就是根据需求动态地加载资源，在运行时加载新类。在运行时创建一个新类,只需要3步:

1. 为 class pair分配存储空间 ,使用 objc_allocateClassPair函数
2. 增加需要的方法使用class_addMethod函数,增加实例变量用class_addIvar
3. 用objc_registerClassPair函数注册这个类,以便它能被别人使用。

> 使用这些函数请引#import

> <objc runtime.h="">
> </objc>

## Objective-C的优缺点。

objc优点：

1. Cateogies
2. ?Posing
3. 动态识别
4. 指标计算
5. 弹性讯息传递
6. 不是一个过度复杂的 C 衍生语言
7. Objective-C 与 C++ 可混合编程 objc缺点:
8. 不支援命名空间
9. 不支持运算符重载
10. 不支持多重继承
11. 使用动态运行时类型，所有的方法都是函数调用，所以很多编译时优化方法都用不到。（如内联函数等），性能低劣。

## iOS的系统架构

iOS的系统架构分为（ 核心操作系统层 theCore OS layer ）、（ 核心服务层theCore Services layer ）、 （ 媒体层 theMedia layer ）和（ Cocoa 界面服务层 the Cocoa Touch layer ）四个层次。

## cocoa touch框架

iPhone OS 应用程序的基础 Cocoa Touch 框架重用了许多 Mac 系统的成熟模式， 但是它更多地专注于触摸的接口和优化。

UIKit 为您提供了在 iPhone OS 上实现图形，事件驱动程序的基本工具，其建立在和 Mac OS X 中一样的 Foundation 框架上，包括文件处理，网络，字符串操作等。

Cocoa Touch 具有和 iPhone 用户接口一致的特殊设计。有了 UIKit，您可以使用 iPhone OS 上的独特的图形接口控件，按钮，以及全屏视图的功能，您还可以使用加速仪和多点触摸手势来控制您的应用。

各色俱全的框架 除了UIKit 外，Cocoa Touch 包含了创建世界一流 iPhone 应用程序需要的所有框架， 从三维图形，到专业音效，甚至提供设备访问 API 以控制摄像头，或通过 GPS 获知当前位置。

Cocoa Touch 既包含只需要几行代码就可以完成全部任务的强大的 Objective-C 框架， 也在需要时提供基础的 C 语言 API 来直接访问系统。这些框架包括：

Core Animation：通过 Core Animation，您就可以通过一个基于组合独立图层的简单的编程模型来创建丰富的用户体验。

Core Audio：Core Audio 是播放，处理和录制音频的专业技术，能够轻松为您的应用程序添加强大的音频功能。

Core Data：提供了一个面向对象的数据管理解决方案，它易于使用和理解，甚至可处理任何应用或大或小的数据模型。

功能列表：框架分类

下面是 Cocoa Touch 中一小部分可用的框架：

音频和视频：Core Audio ，OpenAL ，Media Library ，AV Foundation

数据管理 ：Core Data ，SQLite

图形和动画 ：Core Animation ，OpenGL ES ，Quartz 2D

网络：Bonjour ，WebKit ，BSD Sockets

用户应用：Address Book ，Core Location ，Map Kit ，Store Kit

## 什么是沙盒模型？哪些操作是属于私有api范畴?

某个iphone工程进行文件操作有此工程对应的指定的位置，不能逾越。

iphone沙箱模型的有四个文件夹documents，tmp，app，Library，永久数据存储一般放documents文件夹， 得到模拟器的路径的可使用NSHomeDirectory()方法。Nsuserdefaults保存的文件在tmp文件夹里。
